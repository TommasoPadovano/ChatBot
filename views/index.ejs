<html>
  <head>
    <title>Simple ChatAI using RiveScript.js</title>
    <link rel="stylesheet" href="./styles/style.css">
  </head>
  <body>
    <div class="chat">
      <div class="messages"></div>
      <div id="edge"></div>
      <form class="actions">
        <input type="text" placeholder="press Enter to sendâ€¦">
      </form> 
    </div>
 
    <script src="https://unpkg.com/rivescript@latest/dist/rivescript.min.js"></script>
    <script>
        let bot = new RiveScript();
        const brains = [
        './data/brain.rive'
        ];
        bot.loadFile(brains).then(botReady).catch(botNotReady); // load the brains

        const message_container = document.querySelector('.messages');
        const form = document.querySelector('form');
        const input_box = document.querySelector('input');
        form.addEventListener("submit", (e) => {
          e.preventDefault();
          selfReply(input_box.value);
          input_box.value = "";
        });
        function botReply(message){
          message_container.innerHTML += `<div class="bot">${message}</div>`;
          location.href = "#edge";
        }
        function selfReply(message){
          message_container.innerHTML += `<div class="self">${message}</div>`;
          location.href = "#edge";
          
          bot.reply("local-user", message).then(function(reply) {
          botReply(reply);
        });
        }
        function botReady(){
          bot.sortReplies();
          botReply("Hello");
        }
        function botNotReady(err){
        }
    </script>
  </body>
</html>